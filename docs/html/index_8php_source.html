<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Constant Contact for WordPress: index.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-horizontal.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Constant Contact for WordPress
   &#160;<span id="projectnumber">3.0.1</span>
   </div>
   <div id="projectbrief">Powerfully integrate Constant Contact into your WordPress website.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index_8php_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">index.php</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?php</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    session_start ();</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    require_once <span class="stringliteral">&#39;ConstantContact.php&#39;</span>;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    require_once <span class="stringliteral">&#39;config.php&#39;</span>;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    </div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    <span class="comment">// if you have a username stored in the Datastore (this is done inside config.php)</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    <span class="keywordflow">if</span> ($DatastoreUser) {</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        $ConstantContact = <span class="keyword">new</span> <a class="code" href="class_constant_contact.html">ConstantContact</a> ( <span class="stringliteral">&quot;oauth2&quot;</span>, $apikey, $username, $accessToken );</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        <span class="comment">// This is to see if a post was made</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        <span class="keywordflow">if</span>($_POST)</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        {   </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;            <span class="comment">// Search Constant Contact for a given Contact</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;            $search = $ConstantContact-&gt;searchContactsByEmail($_POST[<span class="stringliteral">&quot;searchEmailAddress&quot;</span>]);</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        }</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    &lt;H1&gt;Search <span class="keywordflow">for</span> a contact&lt;/H1&gt;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    &lt;form action=<span class="stringliteral">&quot;index.php&quot;</span> method=<span class="stringliteral">&quot;post&quot;</span>&gt;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        &lt;input type=<span class="stringliteral">&quot;text&quot;</span> name=<span class="stringliteral">&quot;searchEmailAddress&quot;</span> maxlength=<span class="stringliteral">&quot;50&quot;</span>&gt; &lt;input</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;            type=<span class="stringliteral">&quot;submit&quot;</span> name=<span class="stringliteral">&quot;submit&quot;</span> value=<span class="stringliteral">&quot;Submit&quot;</span> /&gt;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    &lt;/form&gt;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    &lt;?php</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="comment">// False would represent the contact not existing</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        <span class="keywordflow">if</span>($search != <span class="keyword">false</span>)</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;            $details = $ConstantContact-&gt;getContactDetails($search[0]);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;            echo $details-&gt;emailAddress . <span class="stringliteral">&quot; Exists&quot;</span>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        }</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="comment">// Prints all details of that contact</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        print_r($details);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    &lt;?php </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    &lt;html&gt;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    &lt;body&gt;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        &lt;h1&gt;OAuth 2.0 Example&lt;/h1&gt;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        &lt;h3&gt;Click the link below to authorize your application to access your Constant <a class="code" href="class_contact.html">Contact</a> account resources through <span class="keyword">this</span> PHP Wrapper Library, and obtain an access token that will be used to authenticate other API Requests made within the current session. The Wrapper Library will store the Authentication data in the PHP $_SESSION array by <span class="keywordflow">default</span>.&lt;/h3&gt;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        &lt;h3&gt;Developers should store the authentication data securely on their server and include code in application scripts to restore <span class="keyword">this</span> to the $_SESSION array when the base application script is executed, to avoid the need to re-authenticate when applications scripts are executed at the start of each <span class="keyword">new</span> session.&lt;/h3&gt;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        &lt;?php</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="comment">// you must encode your redirect URL and the link contains the variables from config.php</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        $theRequest = urlencode ( $verificationURL );</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        echo <span class="stringliteral">&quot;&lt;a href=&#39;https://oauth2.constantcontact.com/oauth2/oauth/siteowner/authorize?response_type=code&amp;client_id=&quot;</span> </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        . $apikey . <span class="stringliteral">&quot;&amp;redirect_uri=&quot;</span> </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        . $theRequest </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        . <span class="stringliteral">&quot;&#39;&gt;Authorize here&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    &lt;?php</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;?&gt;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;&lt;/body&gt;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;&lt;/html&gt;</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1da4270117b7b4041d4491270373a02b.html">lib</a></li><li class="navelem"><a class="el" href="dir_f2449522035e263841afc52939e742cf.html">eventspot</a></li><li class="navelem"><a class="el" href="dir_3ca40f9cd20312b013e3193dfc8dd9fe.html">ctct_php_library</a></li><li class="navelem"><b>index.php</b></li>
    <li class="footer">Generated on Thu Aug 22 2013 14:50:45 for Constant Contact for WordPress by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
